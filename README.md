# 凡人修仙志 · 转刀

一个纯前端（HTML/CSS/JavaScript）的轻量游戏原型，包含移动、拾取、武器旋转、Boss/精英/小怪、法宝与战技系统、HUD 与帮助面板等功能。

纯AI编写，代码由GPT-5输出，图片素材由nano-banana生成。

因为使用JS实现功能，浏览器可能会存在卡顿现象，建议用pywebview打下包，或者是用wails/tauri打包成客户端游玩。

## 快速开始
- 方式一：直接双击项目根目录下的 `index.html` 在浏览器中打开。
- 方式二：使用本地静态服务器，浏览器访问 `http://localhost:8000/`
  - Python（3.x）
    ```bash
    # 在项目根目录下执行
    python -m http.server 8000
    ```
    
  - 或使用任意前端静态服务器工具（确保根目录可被作为站点目录）。
  
  注：本地游玩，不建议互联网开放。

## 游戏操作（快捷键）
- W / A / S / D：移动
- Space：冲刺 / 闪避
- E：发动战技「疯狂转刀」
- 1：开启/停止战技「魔刀千刃」
- Q：释放已持有法宝
- M：显示 / 隐藏小地图
- C：打开修仙进境面板
- H：查看 / 关闭帮助面板
- P：暂停 / 继续

## 战技与拾取规则（重要变更）
- 战技期间只显示战技武器，普通武器会被立即摧毁。
- 战技激活时，靠近地图上的武器掉落物将直接被移除，并弹出提示（确保即使外部模块覆盖了原始拾取流程，也不会卡在原地）。
- 「疯狂转刀」：持续时间随你持有的最高品质提升，冷却存在；
- 「魔刀千刃」：无限持续，需要按 1 手动停止。

## 目录结构
```
project/
├── index.html          # 页面入口
├── styles.css          # 样式
├── test.html           # 测试入口（可选）
├── src/                # 主要脚本
│   ├── core.js         # 核心：玩家/世界/拾取/武器/HUD 等
│   ├── game.js         # 主循环：每帧更新与渲染
│   ├── collisions.js   # 碰撞与战斗相关
│   ├── enemies_buildings.js  # 敌人与建筑的生成与更新
│   ├── skill_system.js # 战技系统（疯狂转刀、魔刀千刃）
│   ├── skill_vfx.js    # 战技视觉参数（光晕、缩放）
│   ├── treasures.js    # 地图法宝、G.tryPickup 包装与小地图
│   ├── treasure_fx.js  # 法宝释放效果
│   ├── background.js   # 背景与装饰
│   ├── render_particles.js # 粒子/特效渲染
│   ├── assets.js       # 资源注册
│   ├── help_panel.js   # 帮助面板（H 键）
│   ├── cultivation_panel.js # 修仙进境面板（C 键）
│   └── ...             # 其他 Boss 技能与模块
└── 图片素材/           # 所需图片资源
```

## 运行与调试提示
- 推荐使用现代浏览器（Chrome / Edge / Firefox）。首次播放音频需要一次用户交互（点击/按键）。
- 如果你使用静态服务器，请确保站点根指向项目根目录（包含 index.html）。
- 地图随机拾取与法宝会定时刷新；战技期间的拾取物会被接触即摧毁，属于设计行为。

## 常见问题
- 战技期间为什么拾取物靠近后会消失？
  - 这是预期行为：只显示战技武器，普通武器被摧毁；并避免由于外部包装导致拾取停留在原地。
- 「魔刀千刃」停不下来？
  - 再按一次按键（1）即可停止。

## BOSS技能设计

```
牛魔王：
【熔岩震地】：生成一个红圈，然后会缓慢变大，玩家触碰红圈每0.2s会随机摧毁当前一把武器
【火焰风暴】：分离环绕火焰刀，旋转飓风，火焰刀是非常长的柱状体，可以无视普通武器直接接触玩家角色，然后秒杀
【蛮牛冲撞】：直线锁定玩家，摧毁接触的武器，boss会有个0.5s的无敌，不会被武器击杀

佛陀：
【禅寂领域】：佛陀周围生成一个非常大金色的圆，玩家处于圆的范围内武器品质武器品质会下降，每3s下降一级，到白色品质则不会变化；佛陀以及周围npc武器每5s会升一级，佛陀武器最高可以升到七彩，精英怪武器最高可以升到金色，小怪最高可以升到红色
【佛光普照】：生成五个很长的金色柱状体，以佛陀自身为轴旋转，紫色以及以下品质的武器会被度化消失，玩家移速降低50%持续2s
【千手观音】：被动技能，佛陀有两层武器环绕，内圈是顺时针旋转，外圈是逆时针旋转，外圈武器70个，内圈武器50个，每被摧毁一把身边剩下武器转速增加一点
【坐禅】：每隔40s，恢复自身以及身边npc武器数量

女仙：
【花舞缭乱】：释放圆点弹幕以一定规律向四周扩散，40-60个，圆点随机颜色，颜色和武器品质一样，遵循高品质颜色摧毁低品质颜色的设定；会随机出现1-3个粉色光点，该光点无视角色武器，角色碰到粉色光点直接被秒杀
【藤蔓缠绕】：向角色方向每隔0.3s发射一个一定速度的绿色光柱，角色碰到光柱会无法移动，武器停止旋转，无法释放法宝和战技（玩家被控制按时要有提示），该负面状态持续1s，再次接触负面状态持续时间刷新
【自然共鸣】：生成一个绿色圆圈，圆圈大小能包裹十几个npc单位，绿色圆圈范围内持续回复和增加npc角色武器数量，最多可以增加到60个武器，打破npc角色装备武器上限，圆圈会持续10s

龙王：
【潮汐波动】：生成一层层的潮汐波浪击退敌人
【大海水】：会随机从屏幕某个方向召唤一个淡蓝色的柱状体，将屏幕分割持续10s，共释放2次，玩家角色武器接触该柱状体会直接消失
【水龙卷】：吸收周围武器掉落物储存起来，范围是当前屏幕
【暴雨梨花】：沿着玩家的方向直线释放【水龙卷】吸收的武器，释放的武器遵循高品质颜色摧毁低品质颜色的设定，武器要合理分批次释放，不要一下子全释放完

天帝：
【天罚雷击】：会在玩家脚底生成一个红圈，0.3s后会该区域会释放雷击，雷击为每隔0.3s进行一次攻击随机摧毁一把武器，雷击会造成0.1s的硬直，雷击次数和玩家持有的红色，金色、七彩武器数量和一致，红圈直径和玩家背包中武器总数有关，最大直径是当前窗口四分之一大小（合理即可），如果玩家角色旋转的武器为0，被击中时会被秒杀
【武器天平】：玩家装备高品质的武器（金色、七彩），会吸收到boss身上旋转
【神域禁制】：攻击到天帝的武器品质会下降一级，白色品质武器无法击杀天帝会直接损毁
```

以上仅为设计原型，具体实现效果全看AI。

## 测试页面

test.html为测试页面，用来测试玩家角色技能以及BOSS技能的。

```
Boss 测试快捷键：
1 = 战技（魔刀千刃 开/关），E = 战技（疯狂转刀）
2 = 牛魔王（boss_niumo）
3 = 佛陀（boss_fotuo）
4 = 龙王（boss_longwang）
5 = 女仙（boss_nvXian）
6 = 天帝（boss_tiandi）
0 = 清除当前所有 Boss
本页只生成玩家，不自动生成野怪与建筑；角色身边预置“各品质各一个”的武器掉落物，每个掉落物数量为 20。
```



## 许可
- 本仓库为原型示例，素材与代码仅用于演示与学习，请勿用于商业用途。